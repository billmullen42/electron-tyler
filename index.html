<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>DownGit 2.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css">
  </head>
  <body>
    <div class="ui container center aligned">
      <div class="ui text container">
        <h1 class="ui dividing header">DownGit 2.0</h1>
        <h3 class="first">Download Me</h3>
        <div class="ui search">
          <div class="ui icon input">
            <input id="search" class="prompt" type="text" placeholder="Search...">
            <i class="search icon"></i>
          </div>
          <div class="results"></div>
        </div>
      </div>
      <br />
      <div id="repos" class="ui text container">
      </div>
    </div>
  </body>

  <!-- Insert this line above script imports  -->
  <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      $('.ui.search')
        .search({
          apiSettings: {
            url: 'https://api.github.com/search/repositories?q={query}',
            onResponse: function (githubResponse) {
              $('#repos').empty();
              githubResponse.items.forEach(function(e, i, a) {
                const box = `
                <div class="ui raised very padded text container segment">
                  <h2 class="ui header"><a href="#">${e.full_name}</a></h2>
                  <a href="${e.html_url}/archive/${e.default_branch}.zip"><button class="download ui button">Download</button></a>
                </div>`;
                $('#repos').append(box);
              });
              return {};
            }
          },
          fields: {
            results : 'items',
            title   : 'name',
            url     : 'html_url'
          },
          minCharacters : 3,
          showNoResults: false
        });
    </script>
    <script type="text/javascript">
    const mkdir = require('mkdirp');
    const path = require('path');
    const os = require('os');
    mkdir(`${os.homedir()}/.techfolios`, function (err) {
      if (err) console.error(err);
      else {
        console.log("Nice Meme!");
      }
    });
    </script>
  <!-- Insert this line after script imports -->
  <script>if (window.module) module = window.module;</script>
  <script>
    require('./renderer.js')
  </script>

</html>
